<!DOCTYPE html>
<html lang="en">

<head>
    <title>List Page</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css">
    <link rel="stylesheet" href="/css/style.css">
</head>

<body>
    <div class="container padding-top-bottom">
        <div class="container text-center padding-bottom">
            <img src="/assets/logo.png" alt="Logo">
        </div>
        <div class="container table-style">
            <table class="table table-style">
                <thead class="thead-light">
                    <tr>
                        <th scope="col">Nome</th>
                        <th scope="col">Email</th>
                        <th scope="col">Phone Number</th>
                        <th scope="col">Gender</th>
                        <th scope="col">Edit</th>
                        <th scope="col">Delete</th>
                    </tr>
                </thead>
                <tbody>


                    <%for(var i = 0; i < contacts.length; i++){%>
                        <tr>
                            <td>
                                <%=contacts[i].name%>
                            </td>
                            <td>
                                <%=contacts[i].email%>
                            </td>
                            <td>
                                <%=contacts[i].phone%>
                            </td>
                            <td>
                                <%=contacts[i].gender%>
                            </td>
                            <td>
                                <a class="btn btn-warning" href="/contacts/<%=contacts[i]._id%>/update" >Edit</a>
                            </td>
                            <td>
                                <button class="btn btn-danger" onclick="deleteContact(`<%=contacts[i]._id%>`)">Delete</button>
                            </td>
                        </tr>
                        <%}%>
                </tbody>
            </table>
            <div class="text-center alert alert-danger">
                <%if (!isServerUp) { %>
                    Server is down, come back later ;)
                    <% } %>
            </div>
        </div>
    </div>

    <script src="/js/jquery.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js"></script>
    <script>
        function deleteContact(id){
            $.ajax({
                type:"delete",
                url: "/contacts/" + id,
                success: function(result){
                    location.reload();
                }                 
            });
        } 
    </script>
</body>
</html>